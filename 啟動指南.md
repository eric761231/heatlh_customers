# 葡眾愛客戶管理系統 - 啟動指南

## 🚀 快速啟動（3 步驟）

### 步驟 1：確認設定

確認 `html/js/config.js` 中的設定：

```javascript
const DATA_SOURCE = 'supabase'; // 使用 Supabase
const SUPABASE_URL = 'https://lvrcnmvnqbueghjyvxji.supabase.co';
const SUPABASE_ANON_KEY = 'eyJ...'; // 應該已經設定好了
```

✅ **已確認設定正確**

### 步驟 2：啟動前端

#### 方式 A：直接開啟 HTML 檔案（最簡單）

1. 開啟檔案總管
2. 前往 `html` 資料夾
3. 雙擊 `login.html` 或 `index.html`
4. 瀏覽器會自動開啟

#### 方式 B：使用本地伺服器（推薦 - 避免 CORS 問題）

**使用 Python（如果已安裝）：**

```bash
# 在專案根目錄執行
cd html
python -m http.server 8000
```

然後在瀏覽器訪問：`http://localhost:8000`

**使用 VS Code Live Server：**

1. 在 VS Code 安裝 "Live Server" 擴充功能
2. 右鍵點擊 `html/index.html` 或 `html/login.html`
3. 選擇 "Open with Live Server"

**使用 Node.js（如果已安裝）：**

```bash
# 安裝 http-server（只需一次）
npm install -g http-server

# 啟動伺服器
cd html
http-server -p 8000
```

### 步驟 3：註冊/登入

1. 開啟登入頁面後，點擊「立即註冊」
2. 註冊新帳號（Email + 密碼）
3. 登入後會自動跳轉到行事曆主頁

## 📋 檢查清單

### 前置需求
- [x] Supabase 已設定（URL 和 Key 已在 config.js 中）
- [x] 資料表已建立（customers, schedules, orders, users）
- [x] 前端程式碼已準備好

### 啟動前檢查
- [ ] 確認 `html/js/config.js` 中 `DATA_SOURCE = 'supabase'`
- [ ] 確認 Supabase 連線正常（可以訪問 Supabase Dashboard）

### 啟動後檢查
- [ ] 可以打開登入頁面
- [ ] 可以註冊新帳號
- [ ] 可以登入
- [ ] 登入後可以查看客戶資料
- [ ] 可以新增客戶、行程、訂單

## 🔍 疑難排解

### 問題 1：無法開啟頁面

**解決方案：**
- 使用本地伺服器（方式 B）而不是直接開啟 HTML 檔案
- CORS 問題通常需要透過 HTTP 伺服器解決

### 問題 2：登入失敗

**可能原因：**
- Supabase 設定錯誤
- 網路連線問題

**解決方案：**
1. 檢查瀏覽器控制台（F12）的錯誤訊息
2. 確認 Supabase URL 和 Key 是否正確
3. 確認 Supabase 專案是否正常運行

### 問題 3：資料無法顯示

**可能原因：**
- 資料表尚未建立
- 資料庫連線問題

**解決方案：**
1. 前往 Supabase Dashboard 檢查資料表是否存在
2. 檢查 `created_by` 欄位是否正確設定

### 問題 4：CORS 錯誤

**解決方案：**
- 使用本地伺服器啟動（不要直接開啟 HTML 檔案）
- 確認 Supabase 的 CORS 設定正確

## 📁 專案結構

```
heath/
├── html/                    # 前端檔案（主要目錄）
│   ├── index.html          # 入口頁面（會檢查登入狀態）
│   ├── login.html          # 登入頁面 ⭐ 從這裡開始
│   ├── register.html        # 註冊頁面
│   ├── calendar.html        # 行事曆主頁
│   ├── customers.html       # 客戶資料
│   ├── orders.html          # 訂單管理
│   ├── add-customer.html    # 新增客戶
│   └── js/
│       ├── config.js        # 設定檔 ⚠️ 重要
│       ├── supabase-client.js  # Supabase 客戶端
│       └── ...
└── java-backend/            # Java 後端（目前不使用）
```

## 🎯 推薦啟動方式

**最簡單：使用 VS Code Live Server**

1. 安裝 "Live Server" 擴充功能
2. 開啟 `html` 資料夾
3. 右鍵點擊 `login.html` > "Open with Live Server"
4. 完成！

## 📝 下一步

啟動成功後，您可以：
- ✅ 註冊新帳號
- ✅ 登入系統
- ✅ 新增客戶資料
- ✅ 管理行程
- ✅ 記錄訂單

需要我協助測試啟動嗎？

